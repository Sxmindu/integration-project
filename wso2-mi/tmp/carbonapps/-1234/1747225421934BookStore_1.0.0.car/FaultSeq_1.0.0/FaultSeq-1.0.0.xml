<?xml version="1.0" encoding="UTF-8"?>
<sequence name="FaultSeq" trace="disable" xmlns="http://ws.apache.org/ns/synapse">
    <payloadFactory media-type="json">
        <format>
            {
                "message": "An unexpected error occured",
                "error": {
                    "code": $1,
                    "detail": "$2"
                }
            }
        </format>
        <args>
            <arg expression="get-property('ERROR_CODE')"/>
            <arg expression="get-property('ERROR_MESSAGE')"/>
        </args>
    </payloadFactory>
    <log category="DEBUG">
        <message>${payload}</message>
    </log>
    <respond/>
</sequence>