{"ast":null,"code":"var _s = $RefreshSig$();\nimport axios, { loginAxios } from '../api/axios';\nimport useAuth from './useAuth';\nconst useRefreshToken = () => {\n  _s();\n  const {\n    auth,\n    setAuth\n  } = useAuth();\n  const clientId = process.env.REACT_APP_IS_CLIENT_ID;\n  const clientSecret = process.env.REACT_APP_IS_CLIENT_SECRETE;\n  const authString = btoa(`${clientId}:${clientSecret}`); // Base64 encode\n\n  const params = new URLSearchParams();\n  params.append('grant_type', 'refresh_token');\n  params.append('refresh_token', auth.refresh_token);\n  return async () => {\n    var _response$data;\n    console.log(\"Refresh Token Used\");\n    const response = await loginAxios.get('/oauth2/token', params.toString(), {\n      headers: {\n        'Content-Type': 'application/x-www-form-urlencoded;charset=UTF-8',\n        'Authorization': `Basic ${authString}`\n      }\n    });\n    response.data.role = response === null || response === void 0 ? void 0 : (_response$data = response.data) === null || _response$data === void 0 ? void 0 : _response$data.role.replace(\"_\", \" \");\n    setAuth({\n      ...auth,\n      access_token: response.data.access_token\n    });\n    return response.data.access_token;\n  };\n};\n_s(useRefreshToken, \"6LBGSPwejaouvM/D8gpSe86HqQw=\", false, function () {\n  return [useAuth];\n});\nexport default useRefreshToken;","map":{"version":3,"names":["axios","loginAxios","useAuth","useRefreshToken","_s","auth","setAuth","clientId","process","env","REACT_APP_IS_CLIENT_ID","clientSecret","REACT_APP_IS_CLIENT_SECRETE","authString","btoa","params","URLSearchParams","append","refresh_token","_response$data","console","log","response","get","toString","headers","data","role","replace","access_token"],"sources":["/Users/samindu/Workspace/integration-project/bookstore_client/src/hooks/useRefreshToken.js"],"sourcesContent":["import axios, {loginAxios} from '../api/axios';\r\nimport useAuth from './useAuth';\r\n\r\nconst useRefreshToken = () => {\r\n\r\n    const { auth, setAuth } = useAuth();\r\n\r\n    const clientId = process.env.REACT_APP_IS_CLIENT_ID;\r\n    const clientSecret = process.env.REACT_APP_IS_CLIENT_SECRETE;\r\n\r\n    const authString = btoa(`${clientId}:${clientSecret}`); // Base64 encode\r\n\r\n    const params = new URLSearchParams();\r\n    params.append('grant_type', 'refresh_token');\r\n    params.append('refresh_token', auth.refresh_token);\r\n\r\n    return async () => {\r\n        console.log(\"Refresh Token Used\");\r\n        const response = await loginAxios.get('/oauth2/token',\r\n            params.toString(),\r\n            {\r\n                headers: {\r\n                    'Content-Type': 'application/x-www-form-urlencoded;charset=UTF-8',\r\n                        'Authorization': `Basic ${authString}`\r\n                },\r\n            }\r\n        );\r\n        response.data.role = response?.data?.role.replace(\"_\", \" \");\r\n        setAuth({\r\n            ...auth,\r\n            access_token: response.data.access_token,\r\n        });\r\n        return response.data.access_token;\r\n    };\r\n};\r\n\r\nexport default useRefreshToken;\r\n"],"mappings":";AAAA,OAAOA,KAAK,IAAGC,UAAU,QAAO,cAAc;AAC9C,OAAOC,OAAO,MAAM,WAAW;AAE/B,MAAMC,eAAe,GAAGA,CAAA,KAAM;EAAAC,EAAA;EAE1B,MAAM;IAAEC,IAAI;IAAEC;EAAQ,CAAC,GAAGJ,OAAO,CAAC,CAAC;EAEnC,MAAMK,QAAQ,GAAGC,OAAO,CAACC,GAAG,CAACC,sBAAsB;EACnD,MAAMC,YAAY,GAAGH,OAAO,CAACC,GAAG,CAACG,2BAA2B;EAE5D,MAAMC,UAAU,GAAGC,IAAI,CAAE,GAAEP,QAAS,IAAGI,YAAa,EAAC,CAAC,CAAC,CAAC;;EAExD,MAAMI,MAAM,GAAG,IAAIC,eAAe,CAAC,CAAC;EACpCD,MAAM,CAACE,MAAM,CAAC,YAAY,EAAE,eAAe,CAAC;EAC5CF,MAAM,CAACE,MAAM,CAAC,eAAe,EAAEZ,IAAI,CAACa,aAAa,CAAC;EAElD,OAAO,YAAY;IAAA,IAAAC,cAAA;IACfC,OAAO,CAACC,GAAG,CAAC,oBAAoB,CAAC;IACjC,MAAMC,QAAQ,GAAG,MAAMrB,UAAU,CAACsB,GAAG,CAAC,eAAe,EACjDR,MAAM,CAACS,QAAQ,CAAC,CAAC,EACjB;MACIC,OAAO,EAAE;QACL,cAAc,EAAE,iDAAiD;QAC7D,eAAe,EAAG,SAAQZ,UAAW;MAC7C;IACJ,CACJ,CAAC;IACDS,QAAQ,CAACI,IAAI,CAACC,IAAI,GAAGL,QAAQ,aAARA,QAAQ,wBAAAH,cAAA,GAARG,QAAQ,CAAEI,IAAI,cAAAP,cAAA,uBAAdA,cAAA,CAAgBQ,IAAI,CAACC,OAAO,CAAC,GAAG,EAAE,GAAG,CAAC;IAC3DtB,OAAO,CAAC;MACJ,GAAGD,IAAI;MACPwB,YAAY,EAAEP,QAAQ,CAACI,IAAI,CAACG;IAChC,CAAC,CAAC;IACF,OAAOP,QAAQ,CAACI,IAAI,CAACG,YAAY;EACrC,CAAC;AACL,CAAC;AAACzB,EAAA,CA/BID,eAAe;EAAA,QAESD,OAAO;AAAA;AA+BrC,eAAeC,eAAe"},"metadata":{},"sourceType":"module","externalDependencies":[]}